# netkeiba 重賞レーススクレイピングツール（TypeScript）

2026年2月21日・22日のJRA重賞レース（G1-G3）情報と出走馬データを収集するTypeScriptスクリプトです。

## 対象範囲

- **対象日**: 2026年2月21日（金）、2月22日（土）
- **対象レース**: G1・G2・G3の重賞レースのみ
- **データ**: レース基本情報、出走馬、騎手、斤量など

## セットアップ手順

### 1. Node.jsのバージョン確認

```bash
node --version
```

Node.js 18以上が必要です。

### 2. 依存関係のインストール

```bash
cd scraper
npm install
```

これにより、Puppeteer（ブラウザ自動化）とその他必要なパッケージがインストールされます。

## 実行方法

```bash
npm run scrape
```

または

```bash
npm run dev
```

### 実行すると行われる処理

1. 2/21, 2/22の重賞レース（G1-G3）を検索
2. 各レースの詳細情報を取得
3. 各レースの出走馬情報を収集
4. CSVファイルを出力

### 処理時間

- 重賞レースのみ: 約5-15分
- レース間で10秒の待機時間を設定（サーバー負荷軽減のため）

## 出力ファイル

- `jra_races_2026_02_21_22.csv` - 重賞レース・全馬のデータ
  - ワークスペースルートディレクトリに出力されます

## 注意事項

- 実行には30分〜1時間程度かかる場合があります
- ネットワーク環境によっては時間がかかることがあります
- netkeibaサーバーへの負荷を考慮し、適度な待機時間を設けています
- 途中でエラーが発生しても、取得済みのデータは保存されます

## トラブルシューティング

### ChromeDriverのエラー

```bash
pip install --upgrade webdriver-manager
```

### タイムアウトエラー

スクリプト内の`WAIT_TIME`を増やしてください（デフォルト: 10秒）

### ネットワークエラー

ネットワーク接続を確認し、再度実行してください
